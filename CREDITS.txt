This code was originally copied from:

https://github.com/aspnet/EntityFrameworkCore/tree/master/test/EFCore.Relational.Tests/TestUtilities/FakeProvider